# WebRTC のカスタマイズについて

WebRTC のソースにパッチを当ててビルドをしたい人向けの資料です。

build ディレクトリで `make <パッケージ名>.edit` することで、WebRTC のソースが入った Docker イメージの中に入れます。

この時、momo リポジトリは `/root/momo` にマウントされるので、Docker イメージから抜けても保存しておきたいデータはここに置いて下さい。

`/root/webrtc/src` の下に WebRTC のソースがあるので、これを編集して `/root/momo` ディレクトリの下で `make momo` を実行すれば
カスタマイズされた WebRTC を利用した momo バイナリが生成されます。
この momo バイナリを動作させて、意図した動作になっているかを確認して下さい。

ただし、この時点でカスタマイズしたソースは Docker イメージから抜けると元に戻ってしまうので、
パッチファイルを生成して `/root/momo/patch` の中に生成して下さい。
パッチファイルを保存したら Docker イメージから抜けても構いません。

生成したパッチファイルは、`build/<パッケージ名>/Dockerfile` の中の、WebRTC をビルドする手前で適用して下さい。
既に 4k.patch を適用しているので、それを参考にして下さい。

その上で再度 `make <パッケージ名>` を実行すれば、改めてパッチ適用済みの momo バイナリが生成されます。
